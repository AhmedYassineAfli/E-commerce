<div class="admin-container">
    <div class="admin-header">
        <h1>Gestion des Catégories</h1>
        <p>Ajoutez, modifiez ou supprimez les catégories de produits.</p>
    </div>

    <!-- Add Category Section -->
    <div class="add-category-section">
        <h2>Nouvelle Catégorie</h2>
        <div class="input-group">
            <input type="text" [(ngModel)]="newCategoryName" placeholder="Nom de la catégorie"
                (keyup.enter)="addCategory()">
            <button class="btn-primary" (click)="addCategory()">
                <i class="fas fa-plus"></i> Ajouter
            </button>
        </div>
    </div>

    <!-- Categories List -->
    <div class="categories-list">
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nom</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let cat of categories">
                        <td>#{{ cat.idCategory }}</td>

                        <!-- Display Mode -->
                        <td *ngIf="editingCategory?.idCategory !== cat.idCategory">
                            <span class="category-name">{{ cat.libelleCat }}</span>
                        </td>

                        <!-- Edit Mode -->
                        <td *ngIf="editingCategory?.idCategory === cat.idCategory">
                            <input type="text" [(ngModel)]="editName" class="edit-input"
                                (keyup.enter)="updateCategory()">
                        </td>

                        <td class="actions-cell">
                            <!-- Display Actions -->
                            <div class="action-buttons" *ngIf="editingCategory?.idCategory !== cat.idCategory">
                                <button class="btn-icon edit" (click)="startEdit(cat)" title="Modifier">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon delete" (click)="deleteCategory(cat.idCategory)"
                                    title="Supprimer">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>

                            <!-- Edit Actions -->
                            <div class="action-buttons" *ngIf="editingCategory?.idCategory === cat.idCategory">
                                <button class="btn-icon save" (click)="updateCategory()" title="Enregistrer">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn-icon cancel" (click)="cancelEdit()" title="Annuler">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr *ngIf="categories.length === 0">
                        <td colspan="3" class="empty-state">Aucune catégorie trouvée.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>